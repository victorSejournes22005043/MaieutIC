{% if is_granted('IS_AUTHENTICATED_FULLY') %}
<div id="post-create-modal" class="fixed inset-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-[1000] hidden">
    <div class="bg-white p-5 rounded-lg w-[90%] max-w-[500px] shadow-lg relative">
        <span class="absolute top-2 right-2 text-2xl cursor-pointer" onclick="closePostCreateModal()">&times;</span>
        <h2 class="text-xl font-bold mb-4">Créer une publication</h2>
        {{ form_start(form, {
            'attr': {'id': 'post-create-form'},
            'action': path('app_post_add', { category: category })
        }) }}
            {{ form_row(form.name) }}
            {{ form_row(form.description) }}
            {{ form_row(form.forum) }}
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Publier</button>
        {{ form_end(form) }}
    </div>
</div>
<script>
    function openPostCreateModal() {
        document.getElementById('post-create-modal').classList.remove('hidden');
        // setupForumSelect() peut être appelé ici si besoin
    }
    function closePostCreateModal() {
        document.getElementById('post-create-modal').classList.add('hidden');
    }
    window.openPostCreateModal = openPostCreateModal;
    window.closePostCreateModal = closePostCreateModal;
</script>
{% endif %}
