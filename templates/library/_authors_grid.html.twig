{% if app.user and app.user.userType == 1 %}
    <div class="w-full flex justify-end mb-4">
        <button class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition" onclick="openAuthorCreateModal()">Ajouter un auteur</button>
    </div>
{% endif %}

{% for author in authors %}
    <div class="bg-white rounded-lg overflow-hidden relative w-44 h-72 m-4 p-3 author-card" data-author-id="{{ author.id }}">
        <a href="{{ author.link }}" target="_blank">
            <img src="{{ author.image }}" alt="{{ author.name }}" class="w-full h-40 object-cover rounded-lg">
        </a>
        <div class="p-4">
            <h3 class="text-lg font-semibold text-gray-800">{{ author.name }}</h3>
            <p class="text-sm text-gray-600">{{ author.birthYear }} - {{ author.deathYear ?: '' }}</p>
        </div>
        <div class="absolute bottom-2 right-2">
            <img src="{{ asset('images/flags/' ~ author.nationality ~ '.png') }}" alt="{{ author.nationality }}" class="w-8 h-7">
        </div>
        {% if app.user and app.user.userType == 1 %}
            <div class="absolute top-2 right-2 flex space-x-1">
                <button onclick="openAuthorEditModal({{ author.id }})"
                        class="bg-yellow-400 hover:bg-yellow-500 text-white px-2 py-1 rounded text-xs font-semibold transition"
                        title="Modifier">
                    ✏️
                </button>
                <form method="post" action="{{ path('app_author_delete', {'id': author.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cet auteur ?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete_author_' ~ author.id) }}">
                    <button type="submit"
                            class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs font-semibold transition"
                            title="Supprimer">
                        🗑️
                    </button>
                </form>
            </div>
        {% endif %}
    </div>
{% endfor %}
